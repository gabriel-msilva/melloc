<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Productivity and IPython for Data Science | melloc()</title>
<meta name="keywords" content="productivity, ipython" />
<meta name="description" content="Set up an interactive Python environment for development in Visual Studio Code">
<meta name="author" content="Gabriel Mello Silva">
<link rel="canonical" href="https://gabriel-msilva.github.io/melloc/post/2023-03-12-vscode-ipython-setup/" />
<link crossorigin="anonymous" href="/melloc/assets/css/stylesheet.min.999587bda3ad1b7934c8e7230c140a314ba9db81de48b3b49bc76e35ee73581b.css" integrity="sha256-mZWHvaOtG3k0yOcjDBQKMUup24HeSLO0m8duNe5zWBs=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/melloc/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://gabriel-msilva.github.io/melloc/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://gabriel-msilva.github.io/melloc/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://gabriel-msilva.github.io/melloc/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://gabriel-msilva.github.io/melloc/apple-touch-icon.png">
<link rel="mask-icon" href="https://gabriel-msilva.github.io/melloc/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.92.0" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script src="//yihui.org/js/math-code.js"></script>
<script async
src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<meta property="og:title" content="Productivity and IPython for Data Science" />
<meta property="og:description" content="Set up an interactive Python environment for development in Visual Studio Code" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gabriel-msilva.github.io/melloc/post/2023-03-12-vscode-ipython-setup/" />
<meta property="og:image" content="https://gabriel-msilva.github.io/melloc/cover.png" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-03-12T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2023-03-12T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://gabriel-msilva.github.io/melloc/cover.png" />
<meta name="twitter:title" content="Productivity and IPython for Data Science"/>
<meta name="twitter:description" content="Set up an interactive Python environment for development in Visual Studio Code"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://gabriel-msilva.github.io/melloc/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Productivity and IPython for Data Science",
      "item": "https://gabriel-msilva.github.io/melloc/post/2023-03-12-vscode-ipython-setup/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Productivity and IPython for Data Science",
  "name": "Productivity and IPython for Data Science",
  "description": "Set up an interactive Python environment for development in Visual Studio Code",
  "keywords": [
    "productivity", "ipython"
  ],
  "articleBody": " Programming for Data Analysis can be quite different in some aspects of “traditional” software development. At first, you don’t expect a specific input (dependent variables, or features) and you must iterate a lot until you get a satisfactory output (predictions of a model). There is a lot more exploring. Often you stop typing to ask yourself:\n “What is the mean of variable \\(X\\)?” “How the distribution of values looks like?” “How the models’ performance compare?”  You are very much likely to fail on your earlier assumptions. This is normal, but you should – to borrow a system design concept – fail fast. You want to iterate quickly over analysis and visualizations to better understand the data set you are dealing with. Also, you want to test different algorithms to select the best for the problem in question.\nTherefore, the development workflow in Data Science tends to be quite different from traditional software too. Quick iteration is one of the reasons why interpreted languages (like Python and R) are used way more often than compiled languages in Data Science. We should take the most out of this by configuring our development environment properly.\nRStudio and Spyder are quite similar in their workflow: you have text editing for scripts, an iterative shell for running code, a panel for displaying plots, data frame inspector, all integrated for you. RStudio is focused on R and Spyder, while a great Python IDE for Data Science, does not have the best interface (yet?). Another popular IDE for Data Science is JupyterLab, but it is way more focused on notebooks and needs a lot of tinkering for be a good development environment for scripts.\nThen, there is the well-known Visual Studio Code, or VS Code for short, that is used for many programming languages and purposes. It is not an out-of-box IDE for Data Science like the previous ones, but its versatility is worth it.\nThere are quite a number of VS Code extensions for Data Science (like Jupyter). But on this post, I will show how to configure IPython in VS Code for an enhanced interactive Python shell and kernel.\nIPython overview IPython adds many features on top of the default Python shell, like auto-completion, input history, and “magic commands” to control the environment or perform tasks. It is also highlights syntax, so that is nice. By using the Python shell efficiently, you are very likely to change your workflow and be more productive.\nAfter integrating it to my development environment, I barely see a reason to use Jupyter notebooks. The exception would be for presenting reports with plots and tables, or for educational purposes. You can easily explore and inspect objects on the terminal and, after getting the hang of it, it is faster than running cells.\nExample usage Suppose you started to explore your data and you have the following Python script,\nimport pandas as pd df = pd.DataFrame({\"x\": [1, 2, 3], \"y\": [\"a\", \"a\", \"b\"]}) When integrated to the VS Code terminal, you can run selected lines with Shift + Enter. Running it the first time will start an IPython shell in your terminal. You can also open the Command Palette (Ctrl + Shift + P) and select Python: Start REPL.\nIn [1]: import pandas as pd ...: ...: df = pd.DataFrame({\"x\": [1, 2, 3], \"y\": [\"a\", \"a\", \"b\"]}) Before writing any more code to your script, you can explore your data set in the IPython console.\nIn [2]: df Out[2]: # x y # 0 1 a # 1 2 a # 2 3 b In [3]: df.describe() Out[3]: # x # count 3.0 # mean 2.0 # std 1.0 # min 1.0 # 25% 1.5 # 50% 2.0 # 75% 2.5 # max 3.0 In [4]: df[\"y\"].value_counts() Out[4]: # a 2 # b 1 # Name: y, dtype: int64 You can also type ? after an object to inspect it.\nIn [5]: df? # Type: DataFrame # String form: # x y # 0 1 a # 1 2 a # 2 3 b # Length: 3 # File: ~/mambaforge/envs/data-science/lib/python3.11/site-packages/pandas/ # core/frame.py # Docstring: # Two-dimensional, size-mutable, potentially heterogeneous tabular data. Figures 1 and 2 show auto-completion features of IPython that allows you to type less.\n  Figure 1: Command history cache in IPython. You can navigate the history with arrows keys or get completion for previous commands.   Tab to get options of objects or methods that match the text.\" width=\"100%\" / Figure 2: Tab completion in IPython. Start typing and press Tab to get options of objects or methods that match the text.   IPython vs Jupyter console Yes, JupyterLab console and VS Code’s interactive window are effectively an IPython console. However they share the same flaw: they are associated with a single .py or .ipynb file.\nThis makes all the difference. It induces you to work on a single file. Even while exploring and testing, you should be thinking how to organize modules at different files.\n  Setting up IPython in VS Code First, make sure you have the VS Code’s Python extension installed.\nYou also need to install ipython package in your Python environment. It is good practice to create an isolated environment to work on each project. There are many environment managers for Python, like venv and Conda.\n# virtualenv python -m venv /path/to/venv source /path/to/venv/bin/activate pip install ipython # Conda conda create --name my-env python=3.9 ipython conda activate my-env Figure 3 shows how to select the interpreter from this environment when working on your files. You can also press F1 (or Ctrl + Shift + P) and search Python: Select Interpreter.\n  Figure 3: Selecting the Python interpreter in VS Code.  Now set launch arguments to open an IPython session instead of the default Python terminal. Open VS Code settings file: F1 (or Ctrl + Shift + P)  Preferences: Open User Settings (JSON)\n{ ..., \"python.terminal.launchArgs\": [ \"-m\", \"IPython\", ], ... } IPython profiles IPython can use multiple profiles, with separate configuration and history. By default, if you don’t specify a profile, IPython always runs in the default profile.\nProfiles have a configuration file which you can use to customize IPython options. If you don’t have one yet (usually at ~/.ipython/profile_default/ipython_config.py), you may create it with\n# Create an IPython profile by name # If `profilename` is empty, use the default profile $ ipython profile create [profilename] # Check config file's location $ ipython locate profile [profilename] Use --profile option in VS Code settings to select a non-default profile.\n{ ..., \"python.terminal.launchArgs\": [ \"-m\", \"IPython\", \"--profile\", \"profilename\" ], ... }  Auto-reloading modules Imagine you have a Python module, bar.py, with some useful functions you will reuse on other script.\n# bar.py def foo(): return \"Hello World\" In [1]: from bar import foo In [2]: foo() Out[2]: 'Hello World' Now suppose that you make some change to foo() function in the bar.py file.\n# bar.py def foo(): return \"Hey, you\" You would like that to be updated in your IPython session too, because you want to be iterative with your code. However, that is not the default behavior.\nIn [3]: from bar import foo In [4]: foo() Out[4]: 'Hello World' If you are not working at a single gigantic Python file or Jupyter notebook that does everything but instead building a maintainable modular code, it would be too troublesome and time-consuming to close the terminal, reopen IPython and reload functions/classes from modules every time there are changes. When exploring data or models it is even worse, since you have to reload data or maybe re-run a training step.\nFortunately, there is an built-in extension called autoreload to change that behavior (and with some flexibility).\n %autoreload 2 Reload all modules (except those excluded by %aimport) every time before executing the Python code typed.\n In [5]: %load_ext autoreload In [6]: %autoreload 2 In [7]: foo() Out[7]: 'Hey, you' The argument 2 tells autoreload to reload all modules every time before executing the Python code typed. You can automate this step with your IPython configuration file so you don’t need to repeat the commands at every session start up.\nOpen your profile’s configuration file (ipython_config.py) and change/add these lines:.\n## A list of dotted module names of IPython extensions to load. # Default: [] c.InteractiveShellApp.extensions = [\"autoreload\"] ## lines of code to run at IPython startup. # Default: [] c.InteractiveShellApp.exec_lines = [\"%autoreload 2\"]   tl;dr Make sure VS Code’s Python extension is installed. Create a Python environment and install ipython. Select it as Python interpreter in VS Code. Open VS Code settings: F1  Preferences: Open User Settings (JSON) Set python.terminal.launchArgs to run IPython:\n{ ..., \"python.terminal.launchArgs\": [ \"-m\", \"IPython\" ], ... } Create IPython profile:\nipython profile create [profilename] Enable autoreload extension in the configuration file.\nc.InteractiveShellApp.extensions = [\"autoreload\"] c.InteractiveShellApp.exec_lines = [\"%autoreload 2\"] Run selected code with Shift + Enter\n   ",
  "wordCount" : "1453",
  "inLanguage": "en",
  "image":"https://gabriel-msilva.github.io/melloc/cover.png","datePublished": "2023-03-12T00:00:00Z",
  "dateModified": "2023-03-12T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Gabriel Mello Silva"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://gabriel-msilva.github.io/melloc/post/2023-03-12-vscode-ipython-setup/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "melloc()",
    "logo": {
      "@type": "ImageObject",
      "url": "https://gabriel-msilva.github.io/melloc/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://gabriel-msilva.github.io/melloc/" accesskey="h" title="melloc() (Alt + H)">melloc()</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://gabriel-msilva.github.io/melloc/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://gabriel-msilva.github.io/melloc/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://gabriel-msilva.github.io/melloc/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://gabriel-msilva.github.io/melloc/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://gabriel-msilva.github.io/melloc/">Home</a>&nbsp;»&nbsp;<a href="https://gabriel-msilva.github.io/melloc/post/">Posts</a></div>
    <h1 class="post-title">
      Productivity and IPython for Data Science
    </h1>
    <div class="post-description">
      Set up an interactive Python environment for development in Visual Studio Code
    </div>
    <div class="post-meta"><span title='2023-03-12 00:00:00 +0000 UTC'>2023-03-12</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Gabriel Mello Silva&nbsp;|&nbsp;<a href="https://github.com/gabriel-msilva/melloc" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#ipython-overview" aria-label="IPython overview">IPython overview</a><ul>
                        
                <li>
                    <a href="#example-usage" aria-label="Example usage">Example usage</a></li>
                <li>
                    <a href="#ipython-vs-jupyter-console" aria-label="IPython vs Jupyter console">IPython <em>vs</em> Jupyter console</a></li></ul>
                </li>
                <li>
                    <a href="#setting-up-ipython-in-vs-code" aria-label="Setting up IPython in VS Code">Setting up IPython in VS Code</a><ul>
                        
                <li>
                    <a href="#ipython-profiles" aria-label="IPython profiles">IPython profiles</a></li>
                <li>
                    <a href="#auto-reloading-modules" aria-label="Auto-reloading modules">Auto-reloading modules</a></li></ul>
                </li>
                <li>
                    <a href="#tldr" aria-label="tl;dr">tl;dr</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content">



<p>Programming for Data Analysis can be quite different in some aspects of “traditional” software development.
At first, you don’t expect a specific input (dependent variables, or features) and you must iterate a lot until you get a satisfactory output (predictions of a model).
There is a lot more exploring.
Often you stop typing to ask yourself:</p>
<ul>
<li>“What is the mean of variable <span class="math inline">\(X\)</span>?”</li>
<li>“How the distribution of values looks like?”</li>
<li>“How the models’ performance compare?”</li>
</ul>
<p>You are very much likely to fail on your earlier assumptions.
This is normal, but you should – to borrow a system design concept – <a href="https://en.wikipedia.org/wiki/Fail-fast">fail fast</a>.
You want to iterate quickly over analysis and visualizations to better understand the data set you are dealing with.
Also, you want to test different algorithms to select the best for the problem in question.</p>
<p>Therefore, the development workflow in Data Science tends to be quite different from traditional software too.
Quick iteration is one of the reasons why interpreted languages (like Python and R) are used way more often than compiled languages in Data Science.
We should take the most out of this by configuring our development environment properly.</p>
<p><a href="https://support--rstudio-com.netlify.app/products/rstudio/">RStudio</a> and <a href="https://www.spyder-ide.org/">Spyder</a> are quite similar in their workflow:
you have text editing for scripts, an iterative shell for running code, a panel for displaying plots, data frame inspector, all integrated for you.
RStudio is focused on R and Spyder, while a great Python IDE for Data Science, does not have the best interface (yet?).
Another popular IDE for Data Science is JupyterLab, but it is way more focused on notebooks and needs a lot of tinkering for be a good development environment for scripts.</p>
<p>Then, there is the well-known <a href="https://code.visualstudio.com/">Visual Studio Code</a>, or VS Code for short, that is used for many programming languages and purposes.
It is not an out-of-box IDE for Data Science like the previous ones, but its versatility is worth it.</p>
<p>There are quite a number of VS Code extensions for Data Science (like <a href="https://code.visualstudio.com/docs/python/jupyter-support-py">Jupyter</a>).
But on this post, I will show how to configure <a href="https://ipython.readthedocs.io/en/stable/index.html">IPython</a> in VS Code for an enhanced interactive Python shell and kernel.</p>
<div id="ipython-overview" class="section level1">
<h1 id="ipython-overview" >IPython overview&nbsp;<a hidden class="anchor" aria-hidden="true" href="#ipython-overview">#</a></h1>
<p>IPython adds many features on top of the default Python shell, like auto-completion, input history, and “magic commands” to control the environment or perform tasks.
It is also highlights syntax, so that is nice.
By using the Python shell efficiently, you are very likely to change your workflow and be more productive.</p>
<p>After integrating it to my development environment, I barely see a reason to use Jupyter notebooks.
The exception would be for presenting reports with plots and tables, or for educational purposes.
You can easily explore and inspect objects on the terminal and, after getting the hang of it, it is faster than running cells.</p>
<div id="example-usage" class="section level2">
<h2 id="example-usage" >Example usage&nbsp;<a hidden class="anchor" aria-hidden="true" href="#example-usage">#</a></h2>
<p>Suppose you started to explore your data and you have the following Python script,</p>
<pre class="python"><code>import pandas as pd

df = pd.DataFrame({&quot;x&quot;: [1, 2, 3], &quot;y&quot;: [&quot;a&quot;, &quot;a&quot;, &quot;b&quot;]})</code></pre>
<p>When integrated to the VS Code terminal, you can run selected lines with <kbd>Shift</kbd> + <kbd>Enter</kbd>.
Running it the first time will start an IPython shell in your terminal.
You can also open the Command Palette (<kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd>) and select <em>Python: Start REPL</em>.</p>
<pre class="python"><code>In [1]: import pandas as pd
   ...:
   ...: df = pd.DataFrame({&quot;x&quot;: [1, 2, 3], &quot;y&quot;: [&quot;a&quot;, &quot;a&quot;, &quot;b&quot;]})</code></pre>
<p>Before writing any more code to your script, you can explore your data set in the IPython console.</p>
<pre class="python"><code>In [2]: df
Out[2]:
#    x  y
# 0  1  a
# 1  2  a
# 2  3  b

In [3]: df.describe()
Out[3]: 
#          x
# count  3.0
# mean   2.0
# std    1.0
# min    1.0
# 25%    1.5
# 50%    2.0
# 75%    2.5
# max    3.0

In [4]: df[&quot;y&quot;].value_counts()
Out[4]: 
# a    2
# b    1
# Name: y, dtype: int64</code></pre>
<p>You can also type <code>?</code> after an object to inspect it.</p>
<pre class="python"><code>In [5]: df?

# Type:        DataFrame
# String form:
#    x  y
# 0  1  a
# 1  2  a
# 2  3  b
# Length:      3
# File:        ~/mambaforge/envs/data-science/lib/python3.11/site-packages/pandas/
# core/frame.py
# Docstring:  
# Two-dimensional, size-mutable, potentially heterogeneous tabular data.</code></pre>
<p>Figures <a href="#fig:ipython-history">1</a> and <a href="#fig:ipython-tab-completion">2</a> show auto-completion features of IPython that allows you to type less.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ipython-history"></span>
<a href="ipython-history.png" target="_blank"><img src="ipython-history.png" alt="Command history cache in IPython. You can navigate the history with arrows keys or get completion for previous commands." width="100%" /></a>
<p class="caption">
Figure 1: Command history cache in IPython. You can navigate the history with arrows keys or get completion for previous commands.
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ipython-tab-completion"></span>
<a href="ipython-tab-completion.png" target="_blank"><img src="ipython-tab-completion.png" alt="Tab completion in IPython. Start typing and press &lt;kbd&gt;Tab&lt;/kbd&gt; to get options of objects or methods that match the text." width="100%" /></a>
<p class="caption">
Figure 2: Tab completion in IPython. Start typing and press <kbd>Tab</kbd> to get options of objects or methods that match the text.
</p>
</div>
</div>
<div id="ipython-vs-jupyter-console" class="section level2">
<h2 id="ipython-vs-jupyter-console" >IPython <em>vs</em> Jupyter console&nbsp;<a hidden class="anchor" aria-hidden="true" href="#ipython-vs-jupyter-console">#</a></h2>
<p>Yes, <a href="https://jupyterlab.readthedocs.io/en/stable/user/code_console.html">JupyterLab console</a>
and <a href="https://code.visualstudio.com/docs/python/jupyter-support-py">VS Code’s interactive window</a>
are effectively an IPython console.
However they share the same flaw: they are associated with a single <code>.py</code> or <code>.ipynb</code> file.</p>
<p>This makes <em>all</em> the difference.
It induces you to work on a single file.
Even while exploring and testing, you should be thinking how to organize modules at different files.</p>
</div>
</div>
<div id="setting-up-ipython-in-vs-code" class="section level1">
<h1 id="setting-up-ipython-in-vs-code" >Setting up IPython in VS Code&nbsp;<a hidden class="anchor" aria-hidden="true" href="#setting-up-ipython-in-vs-code">#</a></h1>
<p>First, make sure you have the VS Code’s <a href="python-extension">Python extension</a> installed.</p>
<p>You also need to install <code>ipython</code> package in your Python environment.
It is good practice to create an isolated environment to work on each project.
There are many environment managers for Python, like <a href="https://docs.python.org/3/library/venv.html"><code>venv</code></a> and <a href="https://docs.conda.io/en/latest/">Conda</a>.</p>
<pre class="bash"><code># virtualenv
python -m venv /path/to/venv
source /path/to/venv/bin/activate
pip install ipython

# Conda
conda create --name my-env python=3.9 ipython
conda activate my-env</code></pre>
<p>Figure <a href="#fig:python-environment">3</a> shows how to select the interpreter from this environment when working on your files.
You can also press <kbd>F1</kbd> (or <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd>) and search <em>Python: Select Interpreter</em>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:python-environment"></span>
<a href="python-environment.png" target="_blank"><img src="python-environment.png" alt="Selecting the Python interpreter in VS Code." width="100%" /></a>
<p class="caption">
Figure 3: Selecting the Python interpreter in VS Code.
</p>
</div>
<p>Now set launch arguments to open an IPython session instead of the default Python terminal. Open VS Code settings file:
<kbd>F1</kbd> (or <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd>) &gt; <em>Preferences: Open User Settings (JSON)</em></p>
<pre class="json"><code>{
    ...,
    &quot;python.terminal.launchArgs&quot;: [
        &quot;-m&quot;,
        &quot;IPython&quot;,
    ],
    ...
}</code></pre>
<div id="ipython-profiles" class="section level2">
<h2 id="ipython-profiles" >IPython profiles&nbsp;<a hidden class="anchor" aria-hidden="true" href="#ipython-profiles">#</a></h2>
<p>IPython can use multiple profiles, with separate configuration and history.
By default, if you don’t specify a profile, IPython always runs in the default profile.</p>
<p>Profiles have a configuration file which you can use to <a href="https://ipython.readthedocs.io/en/stable/config/options/terminal.html">customize IPython options</a>.
If you don’t have one yet (usually at <code>~/.ipython/profile_default/ipython_config.py</code>), you may create it with</p>
<pre class="bash"><code># Create an IPython profile by name
# If `profilename` is empty, use the default profile
$ ipython profile create [profilename]

# Check config file&#39;s location
$ ipython locate profile [profilename]</code></pre>
<p>Use <code>--profile</code> option in VS Code settings to select a non-default profile.</p>
<pre class="json"><code>{
    ...,
    &quot;python.terminal.launchArgs&quot;: [
        &quot;-m&quot;,
        &quot;IPython&quot;,
        &quot;--profile&quot;,
        &quot;profilename&quot;
    ],
    ...
}</code></pre>
</div>
<div id="auto-reloading-modules" class="section level2">
<h2 id="auto-reloading-modules" >Auto-reloading modules&nbsp;<a hidden class="anchor" aria-hidden="true" href="#auto-reloading-modules">#</a></h2>
<p>Imagine you have a Python module, <code>bar.py</code>, with some useful functions you will reuse on other script.</p>
<pre class="python"><code># bar.py
def foo():
    return &quot;Hello World&quot;</code></pre>
<pre class="python"><code>In [1]: from bar import foo

In [2]: foo()
Out[2]: &#39;Hello World&#39;</code></pre>
<p>Now suppose that you make some change to <code>foo()</code> function in the <code>bar.py</code> file.</p>
<pre class="python"><code># bar.py
def foo():
    return &quot;Hey, you&quot;</code></pre>
<p>You would like that to be updated in your IPython session too, because you want to be iterative with your code.
However, that is not the default behavior.</p>
<pre class="python"><code>In [3]: from bar import foo

In [4]: foo()
Out[4]: &#39;Hello World&#39;</code></pre>
<p>If you are not working at a single gigantic Python file or Jupyter notebook that does everything but instead building a maintainable <a href="https://en.wikipedia.org/wiki/Modular_programming">modular code</a>,
it would be too troublesome and time-consuming to close the terminal, reopen IPython and reload functions/classes from modules every time there are changes.
When exploring data or models it is even worse, since you have to reload data or maybe re-run a training step.</p>
<p>Fortunately, there is an built-in extension called <a href="https://ipython.org/ipython-doc/3/config/extensions/autoreload.html"><code>autoreload</code></a> to change that behavior (and with some flexibility).</p>
<blockquote>
<p><code>%autoreload 2</code>
Reload all modules (except those excluded by <code>%aimport</code>) every time before executing the Python code typed.</p>
</blockquote>
<pre class="python"><code>In [5]: %load_ext autoreload

In [6]: %autoreload 2

In [7]: foo()
Out[7]: &#39;Hey, you&#39;</code></pre>
<p>The argument <code>2</code> tells <code>autoreload</code> to reload all modules every time before executing the Python code typed.
You can automate this step with your IPython configuration file so you don’t need to repeat the commands at every session start up.</p>
<p>Open your profile’s configuration file (<code>ipython_config.py</code>) and change/add these lines:.</p>
<pre class="python"><code>## A list of dotted module names of IPython extensions to load.
#  Default: []
c.InteractiveShellApp.extensions = [&quot;autoreload&quot;]

## lines of code to run at IPython startup.
#  Default: []
c.InteractiveShellApp.exec_lines = [&quot;%autoreload 2&quot;]</code></pre>
</div>
</div>
<div id="tldr" class="section level1">
<h1 id="tldr" >tl;dr&nbsp;<a hidden class="anchor" aria-hidden="true" href="#tldr">#</a></h1>
<ol style="list-style-type: decimal">
<li>Make sure VS Code’s <a href="python-extension">Python extension</a> is installed.</li>
<li>Create a Python environment and install <code>ipython</code>. Select it as Python interpreter in VS Code.</li>
<li>Open VS Code settings: <kbd>F1</kbd> &gt; <em>Preferences: Open User Settings (JSON)</em></li>
<li><p>Set <code>python.terminal.launchArgs</code> to run IPython:</p>
<pre class="json"><code>{
    ...,
    &quot;python.terminal.launchArgs&quot;: [
        &quot;-m&quot;,
        &quot;IPython&quot;
    ],
    ...
}</code></pre></li>
<li><p>Create IPython profile:</p>
<pre class="bash"><code>ipython profile create [profilename]</code></pre></li>
<li><p>Enable <code>autoreload</code> extension in the configuration file.</p>
<pre class="python"><code>c.InteractiveShellApp.extensions = [&quot;autoreload&quot;]
c.InteractiveShellApp.exec_lines = [&quot;%autoreload 2&quot;]</code></pre></li>
<li><p>Run selected code with <kbd>Shift</kbd> + <kbd>Enter</kbd></p></li>
</ol>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://gabriel-msilva.github.io/melloc/tags/productivity/">productivity</a></li>
      <li><a href="https://gabriel-msilva.github.io/melloc/tags/ipython/">ipython</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://gabriel-msilva.github.io/melloc/post/2022-02-08-mandelbrot-and-julia-sets/">
    <span class="title">Next Page »</span>
    <br>
    <span>Mandelbrot and Julia sets</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Productivity and IPython for Data Science on twitter"
        href="https://twitter.com/intent/tweet/?text=Productivity%20and%20IPython%20for%20Data%20Science&amp;url=https%3a%2f%2fgabriel-msilva.github.io%2fmelloc%2fpost%2f2023-03-12-vscode-ipython-setup%2f&amp;hashtags=productivity%2cipython">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Productivity and IPython for Data Science on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fgabriel-msilva.github.io%2fmelloc%2fpost%2f2023-03-12-vscode-ipython-setup%2f&amp;title=Productivity%20and%20IPython%20for%20Data%20Science&amp;summary=Productivity%20and%20IPython%20for%20Data%20Science&amp;source=https%3a%2f%2fgabriel-msilva.github.io%2fmelloc%2fpost%2f2023-03-12-vscode-ipython-setup%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Productivity and IPython for Data Science on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fgabriel-msilva.github.io%2fmelloc%2fpost%2f2023-03-12-vscode-ipython-setup%2f&title=Productivity%20and%20IPython%20for%20Data%20Science">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Productivity and IPython for Data Science on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fgabriel-msilva.github.io%2fmelloc%2fpost%2f2023-03-12-vscode-ipython-setup%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Productivity and IPython for Data Science on whatsapp"
        href="https://api.whatsapp.com/send?text=Productivity%20and%20IPython%20for%20Data%20Science%20-%20https%3a%2f%2fgabriel-msilva.github.io%2fmelloc%2fpost%2f2023-03-12-vscode-ipython-setup%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Productivity and IPython for Data Science on telegram"
        href="https://telegram.me/share/url?text=Productivity%20and%20IPython%20for%20Data%20Science&amp;url=https%3a%2f%2fgabriel-msilva.github.io%2fmelloc%2fpost%2f2023-03-12-vscode-ipython-setup%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://gabriel-msilva.github.io/melloc/">melloc()</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
